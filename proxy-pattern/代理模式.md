# 代理模式

## 一、介绍

属于结构型模式。

一个类代表另一个类的功能。

#### 1. 意图

为其他对象提供一种代理以控制对这个对象的访问。

#### 2. 主要解决

在直接访问对象时带来的问题，比如说：要访问的对象在远程的机器上。

在面向对象系统中，有些对象由于某些原因（比如对象创建开销很大，或者某些操作需要安全控制，或者需要进程外的访问），直接访问会给使用者或者系统结构带来很多麻烦，我们可以在访问此对象时加上一个对此对象的访问层。

#### 3. 何时使用

想在访问一个类时做一些控制。

#### 4. 如何解决

增加中间层。

#### 5. 关键代码

实现与被代理类组合。

#### 6. 应用实例

spring aop

#### 7. 优点

① 职责清晰；

② 高扩展性；

③ 智能化。

#### 8. 缺点

① 由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢；

② 实现代理模式需要额外的工作，有些代理模式的实现非常复杂。

#### 9. 使用场景

① 远程代理；

② 虚拟代理；

③ Copy-on-Write 代理；

④ 保护（Protect or Access）代理；

⑤ Cache代理；

⑥ 防火墙（Firewall）代理；

⑦ 同步化（Synchronization）代理；

⑧ 智能引用（Smart Reference）代理。

> Note
>
> **注意事项：** 1、和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。 2、和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。

## 二、实现

![代理模式的 UML 图](代理模式.assets/20211025-proxy.svg)